<div *ngFor="let element of elements" [formGroup]="fGroup">
    <div *ngIf="isDisplayed(element)">
        <div [ngSwitch]="element.type.toString()">
            <div *ngSwitchCase="'group'">
                <p>
                    <mat-expansion-panel [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title class="group-title"> {{element.label}} </mat-panel-title>
                        </mat-expansion-panel-header>
                        <ng-template matExpansionPanelContent>
                            <lib-form-renderer [elements]="getGroupChilds(element)" [fGroup]="getFormGroup(element.id)">
                            </lib-form-renderer>
                        </ng-template>
                    </mat-expansion-panel>
                </p>
            </div>



            <div *ngSwitchCase="'input'">
                <lib-input-field [fControl]="getFormControl(element.id)" [element]="element">
                </lib-input-field>
            </div>
            <div *ngSwitchCase="'checkbox'">
                <lib-checkbox [fControl]="getFormControl(element.id)" [element]="element">
                </lib-checkbox>
            </div>
            <div *ngSwitchCase="'dropdown'">
                <lib-dropdown [fControl]="getFormControl(element.id)" [element]="element">
                </lib-dropdown>
            </div>


            <div *ngSwitchDefault>
                <!-- for debugging -->
                default
                {{element.type}}
                <br>
                {{element.type.toString()}}
            </div>
        </div>
    </div>
</div>